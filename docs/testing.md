# テストについて

**本プロジェクトのテスト類は三つあります。**

1. 単体テスト (Unit Test) 

ひとつの機能・画面に対してテストを実施して、個別に動作の確認を行う。

2. 結合テスト (Integration Test)

複数の機能に対して、機能間データ連携等の動作確認を行う。

3. E2Eテスト (End-to-End Test)

アプリケーションが期待どおりに動作し、ユーザーのタスクやプロセスの種類を問わずデータフローが適切に機能することを確認する手法です。

## テストを追加するとき

1. 単体テスト

同フォルダーに `(同ファイル名).test.ts` を作成し、テストを各。

2. 結合テスト

` **/(パッケージ)/__TEST__/integration/ ` に `(テスト名).test.ts` 作成する。

3. E2Eテスト

` **/(パッケージ)/__TEST__/e2e/ ` に `(テスト名).test.ts` 作成する。


※：パッケージによって、テスト項目が異なってくるので、パッケージ内のpackage.jsonでscriptを調整する。

※：急いでいるとき jest の `toMatchSnapshot` を使っていますが、実際の仕様をテストするのが理想です。


## 実行

1. 単体テスト 

```
jest path/to/test.ts
```

2. 結合テスト

```
nx test:int [パッケージ名]
```

3. E2Eテスト

```
nx test:e2e [パッケージ名]
```

4. パッケージ内の全テスト

```
nx test [パッケージ名]
```

5. 当モノレポの全テスト

```
jest
```



## 全てテストが必要？

網羅的にテストを書くのは理想ですが、時間と人数が限られているので、以下でテストを書くかどうか判定します。

- 保存・更新でデータを操る処理
- よく壊れる又は壊れそうな処理
- 簡単に書けるテスト

